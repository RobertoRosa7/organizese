<app-windows-hacker>
  <div class="settings-new-password">
    <button mat-icon-button routerLink="/dashboard/settings">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <p style="margin: 16px 0">Nova senha</p>
    <form
      [formGroup]="formAccount"
      (ngSubmit)="onAccountSubmit()"
      class="form-account"
    >
      <div class="container-forms">
        <div class="form-inline">
          <mat-form-field class="form" floatLabel="always" appearance="outline">
            <mat-label>Senha antiga</mat-label>
            <input
              [readonly]="isLoading"
              [type]="hide ? 'text' : 'password'"
              formControlName="old_password"
              matInput
              placeholder="Senha antiga"
            />
            <mat-icon
              style="cursor: pointer"
              matSuffix
              (click)="hide = !hide"
              [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hide"
            >
              {{ hide ? 'visibility' : 'visibility_off' }}
            </mat-icon>
            <mat-error
              *ngIf="formAccount.get('old_password')?.hasError('required')"
            >
              Digite a senha antiga
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-inline">
          <mat-form-field class="form" floatLabel="always" appearance="outline">
            <mat-label>Nova senha</mat-label>
            <input
              [readonly]="isLoading"
              [type]="hide ? 'text' : 'password'"
              formControlName="new_password"
              matInput
              placeholder="Nova senha"
              required
            />
            <mat-icon
              style="cursor: pointer"
              matSuffix
              (click)="hide = !hide"
              [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hide"
            >
              {{ hide ? 'visibility' : 'visibility_off' }}
            </mat-icon>
            <mat-error
              *ngIf="formAccount.get('new_password')?.hasError('required')"
            >
              Digite a nova senha
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-inline">
          <mat-form-field class="form" floatLabel="always" appearance="outline">
            <mat-label>Confirmar senha</mat-label>
            <input
              [readonly]="isLoading"
              [type]="hide ? 'text' : 'password'"
              formControlName="confirm_password"
              matInput
              placeholder="Confirmar senha"
              required
            />
            <mat-icon
              style="cursor: pointer"
              matSuffix
              (click)="hide = !hide"
              [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hide"
            >
              {{ hide ? 'visibility' : 'visibility_off' }}
            </mat-icon>
            <mat-error
              *ngIf="formAccount.get('confirm_password')?.hasError('required')"
            >
              Digite a confirmação
            </mat-error>
            <mat-error *ngIf="!isPasswordSame">
              Senhas não são iguais
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="form-buttons">
        <button
          [disabled]="!formAccount.valid || isLoading"
          type="submit"
          mat-raised-button
        >
          Salvar
        </button>
      </div>
    </form>
  </div>
</app-windows-hacker>
